{"version":3,"sources":["app.js"],"names":["onYouTubePlayerAPIReady","yt_player","YT","Player","events","onReady","onPlayerReady","onStateChange","onPlayerStateChange","$","onclick","pauseVideo","removeClass","event","data","requestID","requestAnimationFrame","animate","addClass","myPlayerState","init","HEIGHT","window","innerHeight","WIDTH","innerWidth","windowHalfX","windowHalfY","renderer","THREE","WebGLRenderer","antialias","setSize","setClearColor","appendChild","domElement","scene","Scene","uniforms","time","type","value","tex","ImageUtils","loadTexture","mouseX","mouseY","createStats","createCamera","createJacket","createGlitch","camera","PerspectiveCamera","position","z","add","material","ShaderMaterial","vertexShader","document","getElementById","textContent","fragmentShader","blending","AdditiveBlending","transparent","depthTest","tobject","Mesh","PlaneGeometry","renderPass","RenderPass","effectGlitch","GlitchPass","renderToScreen","composer","EffectComposer","addPass","stats","Stats","style","top","right","cancelAnimationFrame","clock","elapsedTime","delta","getDelta","render","update","onDocumentMouseMove","clientX","clientY","onWindowResize","remove","el","className","classList","replace","RegExp","split","join","id","map_range","low1","high1","low2","high2","shadowLight","light","backLight","container","FOV","aspectRatio","nearPlane","farPlane","mesh","baseTime","Date","Clock","addEventListener","tag","createElement","src","firstScriptTag","getElementsByTagName","parentNode","insertBefore"],"mappings":"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","file":"app.min.js","sourcesContent":["var scene, camera, shadowLight, light, backLight, renderer;\nvar container,\n    HEIGHT,\n    WIDTH,\n    windowHalfX,\n    windowHalfY,\n    FOV,\n    aspectRatio,\n    nearPlane,\n    farPlane,\n    mesh,\n    stats,\n    composer,\n    delta,\n    uniforms;\nvar mouseX = 0, mouseY = 0;\nvar baseTime = +new Date;\nvar clock = new THREE.Clock();\n\nwindow.addEventListener('resize', onWindowResize, false);\n// document.addEventListener( 'mousemove', onDocumentMouseMove, false );\n\ninit();\n\nvar tag = document.createElement('script');\ntag.src = 'http://www.youtube.com/player_api';\nvar firstScriptTag = document.getElementsByTagName('script')[0];\nfirstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\nvar yt_player;\nfunction onYouTubePlayerAPIReady() {\n  yt_player = new YT.Player('youtube_player', {\n    events: {\n      'onReady': onPlayerReady,\n      'onStateChange': onPlayerStateChange\n\n    }\n  });\n}\n\nfunction onPlayerReady() {\n  $('youtubeBg').onclick = function(){\n    yt_player.pauseVideo();\n    removeClass($('youtubeBg'), 'on');\n  }\n}\n\nvar myPlayerState;\nfunction onPlayerStateChange(event) {\n  if (event.data == 1) {\n  }else{\n    requestID = requestAnimationFrame(animate);\n    removeClass($('youtubeBg'), 'on');\n    addClass($('youtubeBg'), 'off');\n  }\n  myPlayerState = event.data;\n}\n\n\n\n\nfunction init(){\n  HEIGHT = window.innerHeight;\n  WIDTH = window.innerWidth;\n  windowHalfX = WIDTH / 2;\n  windowHalfY = HEIGHT / 2;\n\n  renderer = new THREE.WebGLRenderer({ antialias:true });\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  // $('world').style.left = (WIDTH - Math.min(WIDTH, 650)) * 0.5 +'px';\n  // $('world').style.width = Math.min(WIDTH, 650) + 'px';\n\n  renderer.setClearColor(0x000000, 1);\n  $('world').appendChild(renderer.domElement);\n\n  scene = new THREE.Scene();\n\n  uniforms = {\n    time: { type: 'f', value: 0.1 },\n    tex:  { type: 't', value: THREE.ImageUtils.loadTexture( 'images/jacket.jpg') },\n    WIDTH: {type: 'f', value: WIDTH},\n    HEIGHT: {type: 'f', value: HEIGHT},\n    mouseX: {type: 'f', value: mouseX},\n    mouseY: {type: 'f', value: mouseY}\n  };\n  createStats();\n\n  createCamera();\n  createJacket();\n  createGlitch();\n  animate();\n\n}\n\nfunction createCamera(){\n  camera = new THREE.PerspectiveCamera(45, 1000 / 1000, 0.1,10000);\n  camera.position.z = 1000;\n  scene.add(camera);\n}\n\n\nfunction createJacket(){\n  material = new THREE.ShaderMaterial({\n    vertexShader: document.getElementById('vshader').textContent,\n    fragmentShader: document.getElementById('fshader').textContent,\n    uniforms: uniforms,\n    blending: THREE.AdditiveBlending, transparent: true, depthTest: false\n  });\n  tobject = new THREE.Mesh( new THREE.PlaneGeometry(1000, 1000 ,1,1), material);\n  scene.add(tobject);\n\n}\n\nfunction createGlitch(){\n  var renderPass = new THREE.RenderPass(scene, camera);\n  var effectGlitch = new THREE.GlitchPass(8);\n  effectGlitch.renderToScreen = true;\n\n  composer = new THREE.EffectComposer(renderer);\n  composer.setSize(WIDTH, HEIGHT);\n  composer.addPass(renderPass);\n  composer.addPass(effectGlitch);\n}\n\nfunction createStats(){\n  stats = new Stats();\n  stats.domElement.style.position = 'absolute';\n  stats.domElement.style.top = '0';\n  stats.domElement.style.right = '0';\n  $('world').appendChild(stats.domElement);\n}\n\nfunction animate(){\n  requestID = requestAnimationFrame(animate);\n  if(myPlayerState == 1 || myPlayerState == 3){\n    cancelAnimationFrame(requestID);\n    removeClass($('youtubeBg'), 'off');\n    addClass($('youtubeBg'), 'on');\n  }\n\n  material.uniforms.time.value = clock.elapsedTime;\n  delta = clock.getDelta();\n  render();\n  stats.update();\n}\n\nfunction render(){\n  // renderer.render(scene, camera);\n  composer.render(clock.elapsedTime);\n}\n\nfunction onDocumentMouseMove(event) {\n  material.uniforms.mouseX.value = ( event.clientX - windowHalfX ) * 0.15;\n  material.uniforms.mouseY.value = ( event.clientY - windowHalfY ) * 0.15;\n  // console.log('x:'+material.uniforms.mouseX.value + 'y:'+ material.uniforms.mouseY.value);\n}\n\nfunction onWindowResize(){\n  WIDTH = window.innerWidth;\n  HEIGHT = window.innerHeight;\n  windowHalfX = window.innerWidth / 2;\n  windowHalfY = window.innerHeight / 2;\n  // camera.aspect = window.innerWidth / window.innerHeight;\n  // camera.updateProjectionMatrix();\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  composer.setSize(window.innerWidth, window.innerHeight);\n  material.uniforms.WIDTH.value = WIDTH;\n  material.uniforms.HEIGHT.value = HEIGHT;\n  scene.remove(tobject);\n  createJacket();\n  // $('world').style.left = (WIDTH - Math.min(WIDTH, 650)) * 0.5 +'px';\n  // $('world').style.width = Math.min(WIDTH, 650) + 'px';\n}\n\n\nfunction addClass(el, className){\n  if (el.classList)\n    el.classList.add(className);\n  else\n    el.className += ' ' + className;\n}\n\nfunction removeClass(el, className){\n  if (el.classList)\n    el.classList.remove(className);\n  else\n  el.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n}\n\nfunction $( id ) {\n  return document.getElementById( id );\n}\n\nfunction map_range(value, low1, high1, low2, high2) {\n    return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n}\n"],"sourceRoot":"/source/"}